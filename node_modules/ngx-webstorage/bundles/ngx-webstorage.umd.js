(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('rxjs/operators'), require('@angular/core'), require('rxjs'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ngx-webstorage', ['exports', 'rxjs/operators', '@angular/core', 'rxjs', '@angular/common'], factory) :
    (factory((global['ngx-webstorage'] = {}),global.rxjs.operators,global.ng.core,global.rxjs,global.ng.common));
}(this, (function (exports,operators,i0,rxjs,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var StorageStrategies = {
        Local: 'local_strategy',
        Session: 'session_strategy',
        InMemory: 'in_memory_strategy',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @return {?}
     */
    function noop() { }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DefaultPrefix = 'ngx-webstorage';
    /** @type {?} */
    var DefaultSeparator = '|';
    /** @type {?} */
    var DefaultIsCaseSensitive = false;

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var StorageKeyManager = /** @class */ (function () {
        function StorageKeyManager() {
        }
        /**
         * @param {?} raw
         * @return {?}
         */
        StorageKeyManager.normalize = /**
         * @param {?} raw
         * @return {?}
         */
            function (raw) {
                raw = StorageKeyManager.isCaseSensitive ? raw : raw.toLowerCase();
                return "" + StorageKeyManager.prefix + StorageKeyManager.separator + raw;
            };
        /**
         * @param {?} key
         * @return {?}
         */
        StorageKeyManager.isNormalizedKey = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return key.indexOf(StorageKeyManager.prefix + StorageKeyManager.separator) === 0;
            };
        /**
         * @param {?} prefix
         * @return {?}
         */
        StorageKeyManager.setPrefix = /**
         * @param {?} prefix
         * @return {?}
         */
            function (prefix) {
                StorageKeyManager.prefix = prefix;
            };
        /**
         * @param {?} separator
         * @return {?}
         */
        StorageKeyManager.setSeparator = /**
         * @param {?} separator
         * @return {?}
         */
            function (separator) {
                StorageKeyManager.separator = separator;
            };
        /**
         * @param {?} enable
         * @return {?}
         */
        StorageKeyManager.setCaseSensitive = /**
         * @param {?} enable
         * @return {?}
         */
            function (enable) {
                StorageKeyManager.isCaseSensitive = enable;
            };
        /**
         * @param {?} config
         * @return {?}
         */
        StorageKeyManager.consumeConfiguration = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                if ('prefix' in config)
                    this.setPrefix(config.prefix);
                if ('separator' in config)
                    this.setSeparator(config.separator);
                if ('caseSensitive' in config)
                    this.setCaseSensitive(config.caseSensitive);
            };
        StorageKeyManager.prefix = DefaultPrefix;
        StorageKeyManager.separator = DefaultSeparator;
        StorageKeyManager.isCaseSensitive = DefaultIsCaseSensitive;
        return StorageKeyManager;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SyncStorage = /** @class */ (function () {
        function SyncStorage(strategy) {
            this.strategy = strategy;
        }
        /**
         * @param {?} key
         * @return {?}
         */
        SyncStorage.prototype.retrieve = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                /** @type {?} */
                var value;
                this.strategy.get(StorageKeyManager.normalize(key)).subscribe(function (result) { return value = typeof result === 'undefined' ? null : result; });
                return value;
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        SyncStorage.prototype.store = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                this.strategy.set(StorageKeyManager.normalize(key), value).subscribe(noop);
                return value;
            };
        /**
         * @param {?=} key
         * @return {?}
         */
        SyncStorage.prototype.clear = /**
         * @param {?=} key
         * @return {?}
         */
            function (key) {
                if (key !== undefined)
                    this.strategy.del(StorageKeyManager.normalize(key)).subscribe(noop);
                else
                    this.strategy.clear().subscribe(noop);
            };
        /**
         * @return {?}
         */
        SyncStorage.prototype.getStrategyName = /**
         * @return {?}
         */
            function () { return this.strategy.name; };
        /**
         * @param {?} key
         * @return {?}
         */
        SyncStorage.prototype.observe = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                key = StorageKeyManager.normalize(key);
                return this.strategy.keyChanges.pipe(operators.filter(function (changed) { return changed === null || changed === key; }), operators.switchMap(function () { return _this.strategy.get(key); }), operators.distinctUntilChanged(), operators.shareReplay());
            };
        return SyncStorage;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AsyncStorage = /** @class */ (function () {
        function AsyncStorage(strategy) {
            this.strategy = strategy;
        }
        /**
         * @param {?} key
         * @return {?}
         */
        AsyncStorage.prototype.retrieve = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return this.strategy.get(StorageKeyManager.normalize(key)).pipe(operators.map(function (value) { return typeof value === 'undefined' ? null : value; }));
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        AsyncStorage.prototype.store = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                return this.strategy.set(StorageKeyManager.normalize(key), value);
            };
        /**
         * @param {?=} key
         * @return {?}
         */
        AsyncStorage.prototype.clear = /**
         * @param {?=} key
         * @return {?}
         */
            function (key) {
                return key !== undefined ? this.strategy.del(StorageKeyManager.normalize(key)) : this.strategy.clear();
            };
        /**
         * @return {?}
         */
        AsyncStorage.prototype.getStrategyName = /**
         * @return {?}
         */
            function () { return this.strategy.name; };
        /**
         * @param {?} key
         * @return {?}
         */
        AsyncStorage.prototype.observe = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                key = StorageKeyManager.normalize(key);
                return this.strategy.keyChanges.pipe(operators.filter(function (changed) { return changed === null || changed === key; }), operators.switchMap(function () { return _this.strategy.get(key); }), operators.distinctUntilChanged(), operators.shareReplay());
            };
        return AsyncStorage;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var StrategyCacheService = /** @class */ (function () {
        function StrategyCacheService() {
            this.caches = {};
        }
        /**
         * @param {?} strategyName
         * @param {?} key
         * @return {?}
         */
        StrategyCacheService.prototype.get = /**
         * @param {?} strategyName
         * @param {?} key
         * @return {?}
         */
            function (strategyName, key) {
                return this.getCacheStore(strategyName)[key];
            };
        /**
         * @param {?} strategyName
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        StrategyCacheService.prototype.set = /**
         * @param {?} strategyName
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (strategyName, key, value) {
                this.getCacheStore(strategyName)[key] = value;
            };
        /**
         * @param {?} strategyName
         * @param {?} key
         * @return {?}
         */
        StrategyCacheService.prototype.del = /**
         * @param {?} strategyName
         * @param {?} key
         * @return {?}
         */
            function (strategyName, key) {
                delete this.getCacheStore(strategyName)[key];
            };
        /**
         * @param {?} strategyName
         * @return {?}
         */
        StrategyCacheService.prototype.clear = /**
         * @param {?} strategyName
         * @return {?}
         */
            function (strategyName) {
                this.caches[strategyName] = ( /** @type {?} */({}));
            };
        /**
         * @param {?} strategyName
         * @return {?}
         */
        StrategyCacheService.prototype.getCacheStore = /**
         * @param {?} strategyName
         * @return {?}
         */
            function (strategyName) {
                if (strategyName in this.caches)
                    return this.caches[strategyName];
                return this.caches[strategyName] = ( /** @type {?} */({}));
            };
        StrategyCacheService.decorators = [
            { type: i0.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */ StrategyCacheService.ngInjectableDef = i0.defineInjectable({ factory: function StrategyCacheService_Factory() { return new StrategyCacheService(); }, token: StrategyCacheService, providedIn: "root" });
        return StrategyCacheService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var LOCAL_STORAGE = new i0.InjectionToken('window_local_storage');
    /**
     * @return {?}
     */
    function getLocalStorage() {
        return (typeof window !== 'undefined') ? window.localStorage : null;
    }
    /** @type {?} */
    var LocalStorageProvider = { provide: LOCAL_STORAGE, useFactory: getLocalStorage };
    /** @type {?} */
    var SESSION_STORAGE = new i0.InjectionToken('window_session_storage');
    /**
     * @return {?}
     */
    function getSessionStorage() {
        return (typeof window !== 'undefined') ? window.sessionStorage : null;
    }
    /** @type {?} */
    var SessionStorageProvider = { provide: SESSION_STORAGE, useFactory: getSessionStorage };

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var CompatHelper = /** @class */ (function () {
        function CompatHelper() {
        }
        /**
         * @param {?} storage
         * @return {?}
         */
        CompatHelper.isStorageAvailable = /**
         * @param {?} storage
         * @return {?}
         */
            function (storage) {
                /** @type {?} */
                var available = true;
                try {
                    if (typeof storage === 'object') {
                        storage.setItem('test-storage', 'foobar');
                        storage.removeItem('test-storage');
                    }
                    else
                        available = false;
                }
                catch (e) {
                    available = false;
                }
                return available;
            };
        return CompatHelper;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ BaseSyncStorageStrategy = /** @class */ (function () {
        function BaseSyncStorageStrategy(storage, cache) {
            this.storage = storage;
            this.cache = cache;
            this.keyChanges = new rxjs.Subject();
        }
        Object.defineProperty(BaseSyncStorageStrategy.prototype, "isAvailable", {
            get: /**
             * @return {?}
             */ function () {
                if (this._isAvailable === undefined)
                    this._isAvailable = CompatHelper.isStorageAvailable(this.storage);
                return this._isAvailable;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} key
         * @return {?}
         */
        BaseSyncStorageStrategy.prototype.get = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                /** @type {?} */
                var data = this.cache.get(this.name, key);
                if (data !== undefined)
                    return rxjs.of(data);
                try {
                    /** @type {?} */
                    var item = this.storage.getItem(key);
                    if (item !== null) {
                        data = JSON.parse(item);
                        this.cache.set(this.name, key, data);
                    }
                }
                catch (err) {
                    console.warn(err);
                }
                return rxjs.of(data);
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        BaseSyncStorageStrategy.prototype.set = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                /** @type {?} */
                var data = JSON.stringify(value);
                this.storage.setItem(key, data);
                this.cache.set(this.name, key, value);
                this.keyChanges.next(key);
                return rxjs.of(value);
            };
        /**
         * @param {?} key
         * @return {?}
         */
        BaseSyncStorageStrategy.prototype.del = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                this.storage.removeItem(key);
                this.cache.del(this.name, key);
                this.keyChanges.next(key);
                return rxjs.of(null);
            };
        /**
         * @return {?}
         */
        BaseSyncStorageStrategy.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.storage.clear();
                this.cache.clear(this.name);
                this.keyChanges.next(null);
                return rxjs.of(null);
            };
        return BaseSyncStorageStrategy;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var LocalStorageStrategy = /** @class */ (function (_super) {
        __extends(LocalStorageStrategy, _super);
        function LocalStorageStrategy(storage, cache, platformId, zone) {
            var _this = _super.call(this, storage, cache) || this;
            _this.storage = storage;
            _this.cache = cache;
            _this.platformId = platformId;
            _this.zone = zone;
            _this.name = LocalStorageStrategy.strategyName;
            if (common.isPlatformBrowser(_this.platformId))
                _this.listenExternalChanges();
            return _this;
        }
        /**
         * @return {?}
         */
        LocalStorageStrategy.prototype.listenExternalChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                window.addEventListener('storage', function (event) {
                    return _this.zone.run(function () {
                        if (event.storageArea !== _this.storage)
                            return;
                        /** @type {?} */
                        var key = event.key;
                        if (key !== null)
                            _this.cache.del(_this.name, event.key);
                        else
                            _this.cache.clear(_this.name);
                        _this.keyChanges.next(key);
                    });
                });
            };
        LocalStorageStrategy.strategyName = StorageStrategies.Local;
        /** @nocollapse */
        LocalStorageStrategy.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: i0.Inject, args: [LOCAL_STORAGE,] }] },
                { type: StrategyCacheService },
                { type: undefined, decorators: [{ type: i0.Inject, args: [i0.PLATFORM_ID,] }] },
                { type: i0.NgZone }
            ];
        };
        return LocalStorageStrategy;
    }(BaseSyncStorageStrategy));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SessionStorageStrategy = /** @class */ (function (_super) {
        __extends(SessionStorageStrategy, _super);
        function SessionStorageStrategy(storage, cache, platformId, zone) {
            var _this = _super.call(this, storage, cache) || this;
            _this.storage = storage;
            _this.cache = cache;
            _this.platformId = platformId;
            _this.zone = zone;
            _this.name = SessionStorageStrategy.strategyName;
            if (common.isPlatformBrowser(_this.platformId))
                _this.listenExternalChanges();
            return _this;
        }
        /**
         * @return {?}
         */
        SessionStorageStrategy.prototype.listenExternalChanges = /**
         * @return {?}
         */
            function () {
                var _this = this;
                window.addEventListener('storage', function (event) {
                    return _this.zone.run(function () {
                        if (event.storageArea !== _this.storage)
                            return;
                        /** @type {?} */
                        var key = event.key;
                        if (event.key !== null)
                            _this.cache.del(_this.name, event.key);
                        else
                            _this.cache.clear(_this.name);
                        _this.keyChanges.next(key);
                    });
                });
            };
        SessionStorageStrategy.strategyName = StorageStrategies.Session;
        /** @nocollapse */
        SessionStorageStrategy.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: i0.Inject, args: [SESSION_STORAGE,] }] },
                { type: StrategyCacheService },
                { type: undefined, decorators: [{ type: i0.Inject, args: [i0.PLATFORM_ID,] }] },
                { type: i0.NgZone }
            ];
        };
        return SessionStorageStrategy;
    }(BaseSyncStorageStrategy));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var InMemoryStorageStrategy = /** @class */ (function () {
        function InMemoryStorageStrategy(cache) {
            this.cache = cache;
            this.keyChanges = new rxjs.Subject();
            this.isAvailable = true;
            this.name = InMemoryStorageStrategy.strategyName;
        }
        /**
         * @param {?} key
         * @return {?}
         */
        InMemoryStorageStrategy.prototype.get = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return rxjs.of(this.cache.get(this.name, key));
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        InMemoryStorageStrategy.prototype.set = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                this.cache.set(this.name, key, value);
                this.keyChanges.next(key);
                return rxjs.of(value);
            };
        /**
         * @param {?} key
         * @return {?}
         */
        InMemoryStorageStrategy.prototype.del = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                this.cache.del(this.name, key);
                this.keyChanges.next(key);
                return rxjs.of(null);
            };
        /**
         * @return {?}
         */
        InMemoryStorageStrategy.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.cache.clear(this.name);
                this.keyChanges.next(null);
                return rxjs.of(null);
            };
        InMemoryStorageStrategy.strategyName = StorageStrategies.InMemory;
        /** @nocollapse */
        InMemoryStorageStrategy.ctorParameters = function () {
            return [
                { type: StrategyCacheService, decorators: [{ type: i0.Inject, args: [StrategyCacheService,] }] }
            ];
        };
        return InMemoryStorageStrategy;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var STORAGE_STRATEGIES = new i0.InjectionToken('STORAGE_STRATEGIES');
    /** @type {?} */
    var Strategies = [
        { provide: STORAGE_STRATEGIES, useClass: InMemoryStorageStrategy, multi: true },
        { provide: STORAGE_STRATEGIES, useClass: LocalStorageStrategy, multi: true },
        { provide: STORAGE_STRATEGIES, useClass: SessionStorageStrategy, multi: true },
    ];

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var StorageStrategyStubName = 'stub_strategy';
    var StorageStrategyStub = /** @class */ (function () {
        function StorageStrategyStub(name) {
            this.keyChanges = new rxjs.Subject();
            this.store = {};
            this._available = true;
            this.name = name || StorageStrategyStubName;
        }
        Object.defineProperty(StorageStrategyStub.prototype, "isAvailable", {
            get: /**
             * @return {?}
             */ function () {
                return this._available;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} key
         * @return {?}
         */
        StorageStrategyStub.prototype.get = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return rxjs.of(this.store[key]);
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        StorageStrategyStub.prototype.set = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                this.store[key] = value;
                this.keyChanges.next(key);
                return rxjs.of(value);
            };
        /**
         * @param {?} key
         * @return {?}
         */
        StorageStrategyStub.prototype.del = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                delete this.store[key];
                this.keyChanges.next(key);
                return rxjs.of(null);
            };
        /**
         * @return {?}
         */
        StorageStrategyStub.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.store = {};
                this.keyChanges.next(null);
                return rxjs.of(null);
            };
        /** @nocollapse */
        StorageStrategyStub.ctorParameters = function () {
            return [
                { type: String, decorators: [{ type: i0.Optional }] }
            ];
        };
        return StorageStrategyStub;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var StorageStub = /** @class */ (function () {
        function StorageStub() {
            this.store = {};
        }
        Object.defineProperty(StorageStub.prototype, "length", {
            get: /**
             * @return {?}
             */ function () {
                return Object.keys(this.store).length;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        StorageStub.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.store = {};
            };
        /**
         * @param {?} key
         * @return {?}
         */
        StorageStub.prototype.getItem = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return this.store[key] || null;
            };
        /**
         * @param {?} index
         * @return {?}
         */
        StorageStub.prototype.key = /**
         * @param {?} index
         * @return {?}
         */
            function (index) {
                return Object.keys(this.store)[index];
            };
        /**
         * @param {?} key
         * @return {?}
         */
        StorageStub.prototype.removeItem = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                delete this.store[key];
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        StorageStub.prototype.setItem = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                this.store[key] = value;
            };
        return StorageStub;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var InvalidStrategyError = 'invalid_strategy';
    var StrategyIndex = /** @class */ (function () {
        function StrategyIndex(strategies) {
            this.strategies = strategies;
            this.registration$ = new rxjs.Subject();
            if (!strategies)
                strategies = [];
            this.strategies = strategies.reverse()
                .map(function (strategy, index, arr) { return strategy.name; })
                .map(function (name, index, arr) { return arr.indexOf(name) === index ? index : null; })
                .filter(function (index) { return index !== null; })
                .map(function (index) { return strategies[index]; });
        }
        /**
         * @param {?} name
         * @return {?}
         */
        StrategyIndex.get = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (!this.isStrategyRegistered(name))
                    throw Error(InvalidStrategyError);
                /** @type {?} */
                var strategy = StrategyIndex.index[name];
                if (!strategy.isAvailable) {
                    strategy = StrategyIndex.index[StorageStrategies.InMemory];
                }
                return strategy;
            };
        /**
         * @param {?} name
         * @param {?} strategy
         * @return {?}
         */
        StrategyIndex.set = /**
         * @param {?} name
         * @param {?} strategy
         * @return {?}
         */
            function (name, strategy) {
                StrategyIndex.index[name] = strategy;
            };
        /**
         * @param {?=} name
         * @return {?}
         */
        StrategyIndex.clear = /**
         * @param {?=} name
         * @return {?}
         */
            function (name) {
                if (name !== undefined)
                    delete StrategyIndex.index[name];
                else
                    StrategyIndex.index = {};
            };
        /**
         * @param {?} name
         * @return {?}
         */
        StrategyIndex.isStrategyRegistered = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return name in StrategyIndex.index;
            };
        /**
         * @return {?}
         */
        StrategyIndex.hasRegistredStrategies = /**
         * @return {?}
         */
            function () {
                return Object.keys(StrategyIndex.index).length > 0;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        StrategyIndex.prototype.getStrategy = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return StrategyIndex.get(name);
            };
        /**
         * @return {?}
         */
        StrategyIndex.prototype.indexStrategies = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.strategies.forEach(function (strategy) { return _this.register(strategy.name, strategy); });
            };
        /**
         * @param {?} name
         * @param {?=} overrideIfExists
         * @return {?}
         */
        StrategyIndex.prototype.indexStrategy = /**
         * @param {?} name
         * @param {?=} overrideIfExists
         * @return {?}
         */
            function (name, overrideIfExists) {
                if (overrideIfExists === void 0) {
                    overrideIfExists = false;
                }
                if (StrategyIndex.isStrategyRegistered(name) && !overrideIfExists)
                    return StrategyIndex.get(name);
                /** @type {?} */
                var strategy = this.strategies.find(function (strategy) { return strategy.name === name; });
                if (!strategy)
                    throw new Error(InvalidStrategyError);
                this.register(name, strategy, overrideIfExists);
                return strategy;
            };
        /**
         * @param {?} name
         * @param {?} strategy
         * @param {?=} overrideIfExists
         * @return {?}
         */
        StrategyIndex.prototype.register = /**
         * @param {?} name
         * @param {?} strategy
         * @param {?=} overrideIfExists
         * @return {?}
         */
            function (name, strategy, overrideIfExists) {
                if (overrideIfExists === void 0) {
                    overrideIfExists = false;
                }
                if (!StrategyIndex.isStrategyRegistered(name) || overrideIfExists) {
                    StrategyIndex.set(name, strategy);
                    this.registration$.next(name);
                }
            };
        StrategyIndex.index = {};
        StrategyIndex.decorators = [
            { type: i0.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */
        StrategyIndex.ctorParameters = function () {
            return [
                { type: Array, decorators: [{ type: i0.Optional }, { type: i0.Inject, args: [STORAGE_STRATEGIES,] }] }
            ];
        };
        /** @nocollapse */ StrategyIndex.ngInjectableDef = i0.defineInjectable({ factory: function StrategyIndex_Factory() { return new StrategyIndex(i0.inject(STORAGE_STRATEGIES, 8)); }, token: StrategyIndex, providedIn: "root" });
        return StrategyIndex;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var LocalStorageService = /** @class */ (function (_super) {
        __extends(LocalStorageService, _super);
        function LocalStorageService() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return LocalStorageService;
    }(SyncStorage));
    /**
     * @param {?} index
     * @return {?}
     */
    function buildService(index) {
        /** @type {?} */
        var strategy = index.indexStrategy(StorageStrategies.Local);
        return new SyncStorage(strategy);
    }
    /** @type {?} */
    var LocalStorageServiceProvider = {
        provide: LocalStorageService,
        useFactory: buildService,
        deps: [StrategyIndex]
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var SessionStorageService = /** @class */ (function (_super) {
        __extends(SessionStorageService, _super);
        function SessionStorageService() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return SessionStorageService;
    }(SyncStorage));
    /**
     * @param {?} index
     * @return {?}
     */
    function buildService$1(index) {
        /** @type {?} */
        var strategy = index.indexStrategy(StorageStrategies.Session);
        return new SyncStorage(strategy);
    }
    /** @type {?} */
    var SessionStorageServiceProvider = {
        provide: SessionStorageService,
        useFactory: buildService$1,
        deps: [StrategyIndex]
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var DecoratorBuilder = /** @class */ (function () {
        function DecoratorBuilder() {
        }
        /**
         * @param {?} strategyName
         * @param {?} prototype
         * @param {?} propName
         * @param {?=} key
         * @param {?=} defaultValue
         * @return {?}
         */
        DecoratorBuilder.buildSyncStrategyDecorator = /**
         * @param {?} strategyName
         * @param {?} prototype
         * @param {?} propName
         * @param {?=} key
         * @param {?=} defaultValue
         * @return {?}
         */
            function (strategyName, prototype, propName, key, defaultValue) {
                if (defaultValue === void 0) {
                    defaultValue = null;
                }
                /** @type {?} */
                var rawKey = key || propName;
                /** @type {?} */
                var storageKey;
                Object.defineProperty(prototype, propName, {
                    get: function () {
                        /** @type {?} */
                        var value;
                        StrategyIndex.get(strategyName).get(getKey()).subscribe(function (result) { return value = result; });
                        return value === undefined ? defaultValue : value;
                    },
                    set: function (value) {
                        StrategyIndex.get(strategyName).set(getKey(), value).subscribe(noop);
                    }
                });
                /**
                 * @return {?}
                 */
                function getKey() {
                    if (storageKey !== undefined)
                        return storageKey;
                    return storageKey = StorageKeyManager.normalize(rawKey);
                }
            };
        return DecoratorBuilder;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @param {?=} key
     * @param {?=} defaultValue
     * @return {?}
     */
    function LocalStorage(key, defaultValue) {
        return function (prototype, propName) {
            DecoratorBuilder.buildSyncStrategyDecorator(StorageStrategies.Local, prototype, propName, key, defaultValue);
        };
    }
    /**
     * @param {?=} key
     * @param {?=} defaultValue
     * @return {?}
     */
    function SessionStorage(key, defaultValue) {
        return function (prototype, propName) {
            DecoratorBuilder.buildSyncStrategyDecorator(StorageStrategies.Session, prototype, propName, key, defaultValue);
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var Services = [
        LocalStorageServiceProvider,
        SessionStorageServiceProvider
    ];

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var LIB_CONFIG = new i0.InjectionToken('ngx_webstorage_config');
    /**
     * @param {?} index
     * @return {?}
     */
    function appInit(index) {
        index.indexStrategies();
        return function () { return StrategyIndex.index; };
    }
    var NgxWebstorageModule = /** @class */ (function () {
        function NgxWebstorageModule(index, config) {
            if (config)
                StorageKeyManager.consumeConfiguration(config);
            else
                console.error('NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)');
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        NgxWebstorageModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: NgxWebstorageModule,
                    providers: __spread([
                        {
                            provide: LIB_CONFIG,
                            useValue: config,
                        },
                        LocalStorageProvider,
                        SessionStorageProvider
                    ], Services, Strategies, [
                        {
                            provide: i0.APP_INITIALIZER,
                            useFactory: appInit,
                            deps: [StrategyIndex],
                            multi: true
                        }
                    ])
                };
            };
        NgxWebstorageModule.decorators = [
            { type: i0.NgModule, args: [{},] }
        ];
        /** @nocollapse */
        NgxWebstorageModule.ctorParameters = function () {
            return [
                { type: StrategyIndex },
                { type: undefined, decorators: [{ type: i0.Optional }, { type: i0.Inject, args: [LIB_CONFIG,] }] }
            ];
        };
        return NgxWebstorageModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.LOCAL_STORAGE = LOCAL_STORAGE;
    exports.SESSION_STORAGE = SESSION_STORAGE;
    exports.STORAGE_STRATEGIES = STORAGE_STRATEGIES;
    exports.LocalStorageService = LocalStorageService;
    exports.SessionStorageService = SessionStorageService;
    exports.StorageStrategies = StorageStrategies;
    exports.SyncStorage = SyncStorage;
    exports.AsyncStorage = AsyncStorage;
    exports.StrategyCacheService = StrategyCacheService;
    exports.LocalStorageStrategy = LocalStorageStrategy;
    exports.SessionStorageStrategy = SessionStorageStrategy;
    exports.InMemoryStorageStrategy = InMemoryStorageStrategy;
    exports.StorageStrategyStubName = StorageStrategyStubName;
    exports.StorageStrategyStub = StorageStrategyStub;
    exports.StorageStub = StorageStub;
    exports.InvalidStrategyError = InvalidStrategyError;
    exports.StrategyIndex = StrategyIndex;
    exports.LocalStorage = LocalStorage;
    exports.SessionStorage = SessionStorage;
    exports.appInit = appInit;
    exports.LIB_CONFIG = LIB_CONFIG;
    exports.NgxWebstorageModule = NgxWebstorageModule;
    exports.ɵb = LocalStorageProvider;
    exports.ɵd = SessionStorageProvider;
    exports.ɵa = getLocalStorage;
    exports.ɵc = getSessionStorage;
    exports.ɵn = Services;
    exports.ɵg = LocalStorageServiceProvider;
    exports.ɵf = buildService;
    exports.ɵi = SessionStorageServiceProvider;
    exports.ɵh = buildService$1;
    exports.ɵl = STORAGE_STRATEGIES;
    exports.ɵj = BaseSyncStorageStrategy;
    exports.ɵe = Strategies;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXdlYnN0b3JhZ2UudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvY29uc3RhbnRzL3N0cmF0ZWd5LnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvaGVscGVycy9ub29wLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvY29uc3RhbnRzL2NvbmZpZy50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL2hlbHBlcnMvc3RvcmFnZUtleU1hbmFnZXIudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9jb3JlL3RlbXBsYXRlcy9zeW5jU3RvcmFnZS50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL2NvcmUvdGVtcGxhdGVzL2FzeW5jU3RvcmFnZS50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL2NvcmUvc3RyYXRlZ3lDYWNoZS50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL2NvcmUvbmF0aXZlU3RvcmFnZS50cyIsIm5vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9oZWxwZXJzL2NvbXBhdC50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL3N0cmF0ZWdpZXMvYmFzZVN5bmNTdG9yYWdlLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvc3RyYXRlZ2llcy9sb2NhbFN0b3JhZ2UudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9zdHJhdGVnaWVzL3Nlc3Npb25TdG9yYWdlLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvc3RyYXRlZ2llcy9pbk1lbW9yeS50cyIsIm5nOi8vbmd4LXdlYnN0b3JhZ2UvbGliL3N0cmF0ZWdpZXMvaW5kZXgudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL3N0dWJzL3N0b3JhZ2VTdHJhdGVneS5zdHViLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9zdHVicy9zdG9yYWdlLnN0dWIudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9zZXJ2aWNlcy9zdHJhdGVneUluZGV4LnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvc2VydmljZXMvbG9jYWxTdG9yYWdlLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvc2VydmljZXMvc2Vzc2lvblN0b3JhZ2UudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9oZWxwZXJzL2RlY29yYXRvckJ1aWxkZXIudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9kZWNvcmF0b3JzLnRzIiwibmc6Ly9uZ3gtd2Vic3RvcmFnZS9saWIvc2VydmljZXMvaW5kZXgudHMiLCJuZzovL25neC13ZWJzdG9yYWdlL2xpYi9tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gU3RvcmFnZVN0cmF0ZWdpZXMge1xyXG5cdExvY2FsID0gJ2xvY2FsX3N0cmF0ZWd5JyxcclxuXHRTZXNzaW9uID0gJ3Nlc3Npb25fc3RyYXRlZ3knLFxyXG5cdEluTWVtb3J5ID0gJ2luX21lbW9yeV9zdHJhdGVneSdcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gbm9vcCgpIHt9XHJcbiIsImV4cG9ydCBjb25zdCBEZWZhdWx0UHJlZml4ID0gJ25neC13ZWJzdG9yYWdlJztcclxuZXhwb3J0IGNvbnN0IERlZmF1bHRTZXBhcmF0b3IgPSAnfCc7XHJcbmV4cG9ydCBjb25zdCBEZWZhdWx0SXNDYXNlU2Vuc2l0aXZlID0gZmFsc2U7XHJcbiIsImltcG9ydCB7RGVmYXVsdElzQ2FzZVNlbnNpdGl2ZSwgRGVmYXVsdFByZWZpeCwgRGVmYXVsdFNlcGFyYXRvcn0gZnJvbSAnLi4vY29uc3RhbnRzL2NvbmZpZyc7XHJcbmltcG9ydCB7Tmd4V2Vic3RvcmFnZUNvbmZpZ3VyYXRpb259IGZyb20gJy4uL2NvbmZpZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZUtleU1hbmFnZXIge1xyXG5cdFxyXG5cdHN0YXRpYyBwcmVmaXggPSBEZWZhdWx0UHJlZml4O1xyXG5cdHN0YXRpYyBzZXBhcmF0b3IgPSBEZWZhdWx0U2VwYXJhdG9yO1xyXG5cdHN0YXRpYyBpc0Nhc2VTZW5zaXRpdmUgPSBEZWZhdWx0SXNDYXNlU2Vuc2l0aXZlO1xyXG5cdFxyXG5cdHN0YXRpYyBub3JtYWxpemUocmF3OiBzdHJpbmcpIHtcclxuXHRcdHJhdyA9IFN0b3JhZ2VLZXlNYW5hZ2VyLmlzQ2FzZVNlbnNpdGl2ZSA/IHJhdyA6IHJhdy50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0cmV0dXJuIGAke1N0b3JhZ2VLZXlNYW5hZ2VyLnByZWZpeH0ke1N0b3JhZ2VLZXlNYW5hZ2VyLnNlcGFyYXRvcn0ke3Jhd31gO1xyXG5cdH1cclxuXHRcclxuXHRzdGF0aWMgaXNOb3JtYWxpemVkS2V5KGtleTogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4ga2V5LmluZGV4T2YoU3RvcmFnZUtleU1hbmFnZXIucHJlZml4ICsgU3RvcmFnZUtleU1hbmFnZXIuc2VwYXJhdG9yKSA9PT0gMDtcclxuXHR9XHJcblx0XHJcblx0c3RhdGljIHNldFByZWZpeChwcmVmaXg6IHN0cmluZykge1xyXG5cdFx0U3RvcmFnZUtleU1hbmFnZXIucHJlZml4ID0gcHJlZml4O1xyXG5cdH1cclxuXHRcclxuXHRzdGF0aWMgc2V0U2VwYXJhdG9yKHNlcGFyYXRvcjogc3RyaW5nKSB7XHJcblx0XHRTdG9yYWdlS2V5TWFuYWdlci5zZXBhcmF0b3IgPSBzZXBhcmF0b3I7XHJcblx0fVxyXG5cdFxyXG5cdHN0YXRpYyBzZXRDYXNlU2Vuc2l0aXZlKGVuYWJsZTogYm9vbGVhbikge1xyXG5cdFx0U3RvcmFnZUtleU1hbmFnZXIuaXNDYXNlU2Vuc2l0aXZlID0gZW5hYmxlO1xyXG5cdH1cclxuXHRcclxuXHRzdGF0aWMgY29uc3VtZUNvbmZpZ3VyYXRpb24oY29uZmlnOiBOZ3hXZWJzdG9yYWdlQ29uZmlndXJhdGlvbikge1xyXG5cdFx0aWYgKCdwcmVmaXgnIGluIGNvbmZpZykgdGhpcy5zZXRQcmVmaXgoY29uZmlnLnByZWZpeCk7XHJcblx0XHRpZiAoJ3NlcGFyYXRvcicgaW4gY29uZmlnKSB0aGlzLnNldFNlcGFyYXRvcihjb25maWcuc2VwYXJhdG9yKTtcclxuXHRcdGlmICgnY2FzZVNlbnNpdGl2ZScgaW4gY29uZmlnKSB0aGlzLnNldENhc2VTZW5zaXRpdmUoY29uZmlnLmNhc2VTZW5zaXRpdmUpO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQge1N0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi4vaW50ZXJmYWNlcy9zdG9yYWdlU3RyYXRlZ3knO1xyXG5pbXBvcnQge25vb3B9IGZyb20gJy4uLy4uL2hlbHBlcnMvbm9vcCc7XHJcbmltcG9ydCB7U3RvcmFnZVNlcnZpY2V9IGZyb20gJy4uL2ludGVyZmFjZXMvc3RvcmFnZVNlcnZpY2UnO1xyXG5pbXBvcnQge1N0b3JhZ2VLZXlNYW5hZ2VyfSBmcm9tICcuLi8uLi9oZWxwZXJzL3N0b3JhZ2VLZXlNYW5hZ2VyJztcclxuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtkaXN0aW5jdFVudGlsQ2hhbmdlZCwgZmlsdGVyLCBzaGFyZVJlcGxheSwgc3dpdGNoTWFwfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3luY1N0b3JhZ2UgaW1wbGVtZW50cyBTdG9yYWdlU2VydmljZSB7XHJcblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIHN0cmF0ZWd5OiBTdG9yYWdlU3RyYXRlZ3k8YW55Pikge1xyXG5cdH1cclxuXHJcblx0cmV0cmlldmUoa2V5OiBzdHJpbmcpOiBhbnkge1xyXG5cdFx0bGV0IHZhbHVlOiBhbnk7XHJcblx0XHR0aGlzLnN0cmF0ZWd5LmdldChTdG9yYWdlS2V5TWFuYWdlci5ub3JtYWxpemUoa2V5KSkuc3Vic2NyaWJlKChyZXN1bHQpID0+IHZhbHVlID0gdHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVzdWx0KTtcclxuXHRcdHJldHVybiB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdHN0b3JlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogYW55IHtcclxuXHRcdHRoaXMuc3RyYXRlZ3kuc2V0KFN0b3JhZ2VLZXlNYW5hZ2VyLm5vcm1hbGl6ZShrZXkpLCB2YWx1ZSkuc3Vic2NyaWJlKG5vb3ApO1xyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoa2V5Pzogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAoa2V5ICE9PSB1bmRlZmluZWQpXHJcblx0XHRcdHRoaXMuc3RyYXRlZ3kuZGVsKFN0b3JhZ2VLZXlNYW5hZ2VyLm5vcm1hbGl6ZShrZXkpKS5zdWJzY3JpYmUobm9vcCk7XHJcblx0XHRlbHNlIHRoaXMuc3RyYXRlZ3kuY2xlYXIoKS5zdWJzY3JpYmUobm9vcCk7XHJcblx0fVxyXG5cclxuXHRnZXRTdHJhdGVneU5hbWUoKTogc3RyaW5nIHtyZXR1cm4gdGhpcy5zdHJhdGVneS5uYW1lOyB9XHJcblxyXG5cdG9ic2VydmUoa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cdFx0a2V5ID0gU3RvcmFnZUtleU1hbmFnZXIubm9ybWFsaXplKGtleSk7XHJcblx0XHRyZXR1cm4gdGhpcy5zdHJhdGVneS5rZXlDaGFuZ2VzLnBpcGUoXHJcblx0XHRcdGZpbHRlcigoY2hhbmdlZDogc3RyaW5nKSA9PiBjaGFuZ2VkID09PSBudWxsIHx8IGNoYW5nZWQgPT09IGtleSksXHJcblx0XHRcdHN3aXRjaE1hcCgoKSA9PiB0aGlzLnN0cmF0ZWd5LmdldChrZXkpKSxcclxuXHRcdFx0ZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcclxuXHRcdFx0c2hhcmVSZXBsYXkoKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7U3RvcmFnZVN0cmF0ZWd5fSBmcm9tICcuLi9pbnRlcmZhY2VzL3N0b3JhZ2VTdHJhdGVneSc7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7U3RvcmFnZVNlcnZpY2V9IGZyb20gJy4uL2ludGVyZmFjZXMvc3RvcmFnZVNlcnZpY2UnO1xyXG5pbXBvcnQge1N0b3JhZ2VLZXlNYW5hZ2VyfSBmcm9tICcuLi8uLi9oZWxwZXJzL3N0b3JhZ2VLZXlNYW5hZ2VyJztcclxuaW1wb3J0IHtkaXN0aW5jdFVudGlsQ2hhbmdlZCwgZmlsdGVyLCBtYXAsIHNoYXJlUmVwbGF5LCBzd2l0Y2hNYXB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBc3luY1N0b3JhZ2UgaW1wbGVtZW50cyBTdG9yYWdlU2VydmljZSB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdHJhdGVneTogU3RvcmFnZVN0cmF0ZWd5PGFueT4pIHtcclxuXHR9XHJcblxyXG5cdHJldHJpZXZlKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHRcdHJldHVybiB0aGlzLnN0cmF0ZWd5LmdldChTdG9yYWdlS2V5TWFuYWdlci5ub3JtYWxpemUoa2V5KSkucGlwZShcclxuXHRcdFx0bWFwKCh2YWx1ZTogYW55KSA9PiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHZhbHVlKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHN0b3JlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHRcdHJldHVybiB0aGlzLnN0cmF0ZWd5LnNldChTdG9yYWdlS2V5TWFuYWdlci5ub3JtYWxpemUoa2V5KSwgdmFsdWUpO1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoa2V5Pzogc3RyaW5nKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4ga2V5ICE9PSB1bmRlZmluZWQgPyB0aGlzLnN0cmF0ZWd5LmRlbChTdG9yYWdlS2V5TWFuYWdlci5ub3JtYWxpemUoa2V5KSkgOiB0aGlzLnN0cmF0ZWd5LmNsZWFyKCk7XHJcblx0fVxyXG5cclxuXHRnZXRTdHJhdGVneU5hbWUoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuc3RyYXRlZ3kubmFtZTsgfVxyXG5cclxuXHRvYnNlcnZlKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHRcdGtleSA9IFN0b3JhZ2VLZXlNYW5hZ2VyLm5vcm1hbGl6ZShrZXkpO1xyXG5cdFx0cmV0dXJuIHRoaXMuc3RyYXRlZ3kua2V5Q2hhbmdlcy5waXBlKFxyXG5cdFx0XHRmaWx0ZXIoKGNoYW5nZWQ6IHN0cmluZykgPT4gY2hhbmdlZCA9PT0gbnVsbCB8fCBjaGFuZ2VkID09PSBrZXkpLFxyXG5cdFx0XHRzd2l0Y2hNYXAoKCkgPT4gdGhpcy5zdHJhdGVneS5nZXQoa2V5KSksXHJcblx0XHRcdGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXHJcblx0XHRcdHNoYXJlUmVwbGF5KClcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7SW5qZWN0YWJsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0cmF0ZWd5Q2FjaGUge1xyXG5cdFtrZXk6IHN0cmluZ106IGFueTtcclxufVxyXG5cclxuQEluamVjdGFibGUoe3Byb3ZpZGVkSW46ICdyb290J30pXHJcbmV4cG9ydCBjbGFzcyBTdHJhdGVneUNhY2hlU2VydmljZSB7XHJcblxyXG5cdHByb3RlY3RlZCBjYWNoZXM6IHsgW25hbWU6IHN0cmluZ106IFN0cmF0ZWd5Q2FjaGUgfSA9IHt9O1xyXG5cclxuXHRnZXQoc3RyYXRlZ3lOYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRDYWNoZVN0b3JlKHN0cmF0ZWd5TmFtZSlba2V5XTtcclxuXHR9XHJcblxyXG5cdHNldChzdHJhdGVneU5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcclxuXHRcdHRoaXMuZ2V0Q2FjaGVTdG9yZShzdHJhdGVneU5hbWUpW2tleV0gPSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cdGRlbChzdHJhdGVneU5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcpIHtcclxuXHRcdGRlbGV0ZSB0aGlzLmdldENhY2hlU3RvcmUoc3RyYXRlZ3lOYW1lKVtrZXldO1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoc3RyYXRlZ3lOYW1lOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuY2FjaGVzW3N0cmF0ZWd5TmFtZV0gPSB7fSBhcyBTdHJhdGVneUNhY2hlO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGdldENhY2hlU3RvcmUoc3RyYXRlZ3lOYW1lOiBzdHJpbmcpOiBTdHJhdGVneUNhY2hlIHtcclxuXHRcdGlmIChzdHJhdGVneU5hbWUgaW4gdGhpcy5jYWNoZXMpIHJldHVybiB0aGlzLmNhY2hlc1tzdHJhdGVneU5hbWVdO1xyXG5cdFx0cmV0dXJuIHRoaXMuY2FjaGVzW3N0cmF0ZWd5TmFtZV0gPSB7fSBhcyBTdHJhdGVneUNhY2hlO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQge0ZhY3RvcnlQcm92aWRlciwgSW5qZWN0aW9uVG9rZW59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1dlYlN0b3JhZ2V9IGZyb20gJy4vaW50ZXJmYWNlcy93ZWJTdG9yYWdlJztcclxuXHJcbmV4cG9ydCBjb25zdCBMT0NBTF9TVE9SQUdFOiBJbmplY3Rpb25Ub2tlbjxXZWJTdG9yYWdlPiA9IG5ldyBJbmplY3Rpb25Ub2tlbjxXZWJTdG9yYWdlPignd2luZG93X2xvY2FsX3N0b3JhZ2UnKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UoKSB7XHJcblx0cmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cubG9jYWxTdG9yYWdlIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExvY2FsU3RvcmFnZVByb3ZpZGVyOiBGYWN0b3J5UHJvdmlkZXIgPSB7cHJvdmlkZTogTE9DQUxfU1RPUkFHRSwgdXNlRmFjdG9yeTogZ2V0TG9jYWxTdG9yYWdlfTtcclxuXHJcbmV4cG9ydCBjb25zdCBTRVNTSU9OX1NUT1JBR0U6IEluamVjdGlvblRva2VuPFdlYlN0b3JhZ2U+ID0gbmV3IEluamVjdGlvblRva2VuPFdlYlN0b3JhZ2U+KCd3aW5kb3dfc2Vzc2lvbl9zdG9yYWdlJyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Vzc2lvblN0b3JhZ2UoKSB7XHJcblx0cmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UgOiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgU2Vzc2lvblN0b3JhZ2VQcm92aWRlcjogRmFjdG9yeVByb3ZpZGVyID0ge3Byb3ZpZGU6IFNFU1NJT05fU1RPUkFHRSwgdXNlRmFjdG9yeTogZ2V0U2Vzc2lvblN0b3JhZ2V9O1xyXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImltcG9ydCB7V2ViU3RvcmFnZX0gZnJvbSAnLi4vY29yZS9pbnRlcmZhY2VzL3dlYlN0b3JhZ2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBhdEhlbHBlciB7XHJcblxyXG5cdHN0YXRpYyBpc1N0b3JhZ2VBdmFpbGFibGUoc3RvcmFnZTogV2ViU3RvcmFnZSk6IGJvb2xlYW4ge1xyXG5cdFx0bGV0IGF2YWlsYWJsZSA9IHRydWU7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRpZiAodHlwZW9mIHN0b3JhZ2UgPT09ICdvYmplY3QnKSB7XHJcblx0XHRcdFx0c3RvcmFnZS5zZXRJdGVtKCd0ZXN0LXN0b3JhZ2UnLCAnZm9vYmFyJyk7XHJcblx0XHRcdFx0c3RvcmFnZS5yZW1vdmVJdGVtKCd0ZXN0LXN0b3JhZ2UnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGF2YWlsYWJsZSA9IGZhbHNlO1xyXG5cdFx0fSBjYXRjaChlKSB7XHJcblx0XHRcdGF2YWlsYWJsZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGF2YWlsYWJsZTtcclxuXHR9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQge1N0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi4vY29yZS9pbnRlcmZhY2VzL3N0b3JhZ2VTdHJhdGVneSc7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZSwgb2YsIFN1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge1N0cmF0ZWd5Q2FjaGVTZXJ2aWNlfSBmcm9tICcuLi9jb3JlL3N0cmF0ZWd5Q2FjaGUnO1xyXG5pbXBvcnQge0NvbXBhdEhlbHBlcn0gZnJvbSAnLi4vaGVscGVycy9jb21wYXQnO1xyXG5pbXBvcnQge1dlYlN0b3JhZ2V9IGZyb20gJy4uL2NvcmUvaW50ZXJmYWNlcy93ZWJTdG9yYWdlJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlU3luY1N0b3JhZ2VTdHJhdGVneSBpbXBsZW1lbnRzIFN0b3JhZ2VTdHJhdGVneTxhbnk+IHtcclxuXHRyZWFkb25seSBrZXlDaGFuZ2VzOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzdG9yYWdlOiBXZWJTdG9yYWdlLCBwcm90ZWN0ZWQgY2FjaGU6IFN0cmF0ZWd5Q2FjaGVTZXJ2aWNlKSB7fVxyXG5cdFxyXG5cdHByb3RlY3RlZCBfaXNBdmFpbGFibGU6IGJvb2xlYW47XHJcblx0XHJcblx0Z2V0IGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHRoaXMuX2lzQXZhaWxhYmxlID09PSB1bmRlZmluZWQpIHRoaXMuX2lzQXZhaWxhYmxlID0gQ29tcGF0SGVscGVyLmlzU3RvcmFnZUF2YWlsYWJsZSh0aGlzLnN0b3JhZ2UpO1xyXG5cdFx0cmV0dXJuIHRoaXMuX2lzQXZhaWxhYmxlO1xyXG5cdH1cclxuXHRcclxuXHRhYnN0cmFjdCByZWFkb25seSBuYW1lOiBzdHJpbmc7XHJcblx0XHJcblx0Z2V0KGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuXHRcdGxldCBkYXRhOiBhbnkgPSB0aGlzLmNhY2hlLmdldCh0aGlzLm5hbWUsIGtleSk7XHJcblx0XHRpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gb2YoZGF0YSk7XHJcblx0XHRcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGl0ZW06IGFueSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblx0XHRcdGlmIChpdGVtICE9PSBudWxsKSB7XHJcblx0XHRcdFx0ZGF0YSA9IEpTT04ucGFyc2UoaXRlbSk7XHJcblx0XHRcdFx0dGhpcy5jYWNoZS5zZXQodGhpcy5uYW1lLCBrZXksIGRhdGEpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoKGVycikge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oZXJyKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG9mKGRhdGEpO1xyXG5cdH1cclxuXHRcclxuXHRzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG5cdFx0Y29uc3QgZGF0YTogc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG5cdFx0dGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhKTtcclxuXHRcdHRoaXMuY2FjaGUuc2V0KHRoaXMubmFtZSwga2V5LCB2YWx1ZSk7XHJcblx0XHR0aGlzLmtleUNoYW5nZXMubmV4dChrZXkpO1xyXG5cdFx0cmV0dXJuIG9mKHZhbHVlKTtcclxuXHR9XHJcblx0XHJcblx0ZGVsKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcblx0XHR0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG5cdFx0dGhpcy5jYWNoZS5kZWwodGhpcy5uYW1lLCBrZXkpO1xyXG5cdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQoa2V5KTtcclxuXHRcdHJldHVybiBvZihudWxsKTtcclxuXHR9XHJcblx0XHJcblx0Y2xlYXIoKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcblx0XHR0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcclxuXHRcdHRoaXMuY2FjaGUuY2xlYXIodGhpcy5uYW1lKTtcclxuXHRcdHRoaXMua2V5Q2hhbmdlcy5uZXh0KG51bGwpO1xyXG5cdFx0cmV0dXJuIG9mKG51bGwpO1xyXG5cdH1cclxuXHRcclxufVxyXG4iLCJpbXBvcnQge1N0cmF0ZWd5Q2FjaGVTZXJ2aWNlfSBmcm9tICcuLi9jb3JlL3N0cmF0ZWd5Q2FjaGUnO1xyXG5pbXBvcnQge0Jhc2VTeW5jU3RvcmFnZVN0cmF0ZWd5fSBmcm9tICcuL2Jhc2VTeW5jU3RvcmFnZSc7XHJcbmltcG9ydCB7SW5qZWN0LCBOZ1pvbmUsIFBMQVRGT1JNX0lEfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtMT0NBTF9TVE9SQUdFfSBmcm9tICcuLi9jb3JlL25hdGl2ZVN0b3JhZ2UnO1xyXG5pbXBvcnQge1N0b3JhZ2VTdHJhdGVnaWVzfSBmcm9tICcuLi9jb25zdGFudHMvc3RyYXRlZ3knO1xyXG5pbXBvcnQge2lzUGxhdGZvcm1Ccm93c2VyfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1dlYlN0b3JhZ2V9IGZyb20gJy4uL2NvcmUvaW50ZXJmYWNlcy93ZWJTdG9yYWdlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMb2NhbFN0b3JhZ2VTdHJhdGVneSBleHRlbmRzIEJhc2VTeW5jU3RvcmFnZVN0cmF0ZWd5IHtcclxuXHRzdGF0aWMgcmVhZG9ubHkgc3RyYXRlZ3lOYW1lOiBzdHJpbmcgPSBTdG9yYWdlU3RyYXRlZ2llcy5Mb2NhbDtcclxuXHRyZWFkb25seSBuYW1lOiBzdHJpbmcgPSBMb2NhbFN0b3JhZ2VTdHJhdGVneS5zdHJhdGVneU5hbWU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKEBJbmplY3QoTE9DQUxfU1RPUkFHRSkgcHJvdGVjdGVkIHN0b3JhZ2U6IFdlYlN0b3JhZ2UsXHJcblx0ICAgICAgICAgICAgcHJvdGVjdGVkIGNhY2hlOiBTdHJhdGVneUNhY2hlU2VydmljZSxcclxuXHQgICAgICAgICAgICBASW5qZWN0KFBMQVRGT1JNX0lEKSBwcm90ZWN0ZWQgcGxhdGZvcm1JZDogYW55LFxyXG5cdCAgICAgICAgICAgIHByb3RlY3RlZCB6b25lOiBOZ1pvbmUpIHtcclxuXHRcdHN1cGVyKHN0b3JhZ2UsIGNhY2hlKTtcclxuXHRcdGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB0aGlzLmxpc3RlbkV4dGVybmFsQ2hhbmdlcygpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGxpc3RlbkV4dGVybmFsQ2hhbmdlcygpIHtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKGV2ZW50OiBTdG9yYWdlRXZlbnQpID0+IHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG5cdFx0XHRpZiAoZXZlbnQuc3RvcmFnZUFyZWEgIT09IHRoaXMuc3RvcmFnZSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBrZXk6IHN0cmluZyA9IGV2ZW50LmtleTtcclxuXHRcdFx0aWYgKGtleSAhPT0gbnVsbCkgdGhpcy5jYWNoZS5kZWwodGhpcy5uYW1lLCBldmVudC5rZXkpO1xyXG5cdFx0XHRlbHNlIHRoaXMuY2FjaGUuY2xlYXIodGhpcy5uYW1lKTtcclxuXHRcdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQoa2V5KTtcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7U3RyYXRlZ3lDYWNoZVNlcnZpY2V9IGZyb20gJy4uL2NvcmUvc3RyYXRlZ3lDYWNoZSc7XHJcbmltcG9ydCB7QmFzZVN5bmNTdG9yYWdlU3RyYXRlZ3l9IGZyb20gJy4vYmFzZVN5bmNTdG9yYWdlJztcclxuaW1wb3J0IHtJbmplY3QsIE5nWm9uZSwgUExBVEZPUk1fSUR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1NFU1NJT05fU1RPUkFHRX0gZnJvbSAnLi4vY29yZS9uYXRpdmVTdG9yYWdlJztcclxuaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ2llc30gZnJvbSAnLi4vY29uc3RhbnRzL3N0cmF0ZWd5JztcclxuaW1wb3J0IHtpc1BsYXRmb3JtQnJvd3Nlcn0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHtXZWJTdG9yYWdlfSBmcm9tICcuLi9jb3JlL2ludGVyZmFjZXMvd2ViU3RvcmFnZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2Vzc2lvblN0b3JhZ2VTdHJhdGVneSBleHRlbmRzIEJhc2VTeW5jU3RvcmFnZVN0cmF0ZWd5IHtcclxuXHRzdGF0aWMgcmVhZG9ubHkgc3RyYXRlZ3lOYW1lOiBzdHJpbmcgPSBTdG9yYWdlU3RyYXRlZ2llcy5TZXNzaW9uO1xyXG5cdHJlYWRvbmx5IG5hbWU6IHN0cmluZyA9IFNlc3Npb25TdG9yYWdlU3RyYXRlZ3kuc3RyYXRlZ3lOYW1lO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihASW5qZWN0KFNFU1NJT05fU1RPUkFHRSkgcHJvdGVjdGVkIHN0b3JhZ2U6IFdlYlN0b3JhZ2UsXHJcblx0ICAgICAgICAgICAgcHJvdGVjdGVkIGNhY2hlOiBTdHJhdGVneUNhY2hlU2VydmljZSxcclxuXHQgICAgICAgICAgICBASW5qZWN0KFBMQVRGT1JNX0lEKSBwcm90ZWN0ZWQgcGxhdGZvcm1JZDogYW55LFxyXG5cdCAgICAgICAgICAgIHByb3RlY3RlZCB6b25lOiBOZ1pvbmUpIHtcclxuXHRcdHN1cGVyKHN0b3JhZ2UsIGNhY2hlKTtcclxuXHRcdGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB0aGlzLmxpc3RlbkV4dGVybmFsQ2hhbmdlcygpO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGxpc3RlbkV4dGVybmFsQ2hhbmdlcygpIHtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKGV2ZW50OiBTdG9yYWdlRXZlbnQpID0+IHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG5cdFx0XHRpZiAoZXZlbnQuc3RvcmFnZUFyZWEgIT09IHRoaXMuc3RvcmFnZSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBrZXk6IHN0cmluZyA9IGV2ZW50LmtleTtcclxuXHRcdFx0aWYgKGV2ZW50LmtleSAhPT0gbnVsbCkgdGhpcy5jYWNoZS5kZWwodGhpcy5uYW1lLCBldmVudC5rZXkpO1xyXG5cdFx0XHRlbHNlIHRoaXMuY2FjaGUuY2xlYXIodGhpcy5uYW1lKTtcclxuXHRcdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQoa2V5KTtcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7U3RvcmFnZVN0cmF0ZWd5fSBmcm9tICcuLi9jb3JlL2ludGVyZmFjZXMvc3RvcmFnZVN0cmF0ZWd5JztcclxuaW1wb3J0IHtPYnNlcnZhYmxlLCBvZiwgU3ViamVjdH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7U3RyYXRlZ3lDYWNoZVNlcnZpY2V9IGZyb20gJy4uL2NvcmUvc3RyYXRlZ3lDYWNoZSc7XHJcbmltcG9ydCB7U3RvcmFnZVN0cmF0ZWdpZXN9IGZyb20gJy4uL2NvbnN0YW50cy9zdHJhdGVneSc7XHJcbmltcG9ydCB7SW5qZWN0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbk1lbW9yeVN0b3JhZ2VTdHJhdGVneSBpbXBsZW1lbnRzIFN0b3JhZ2VTdHJhdGVneTxhbnk+IHtcclxuXHRzdGF0aWMgcmVhZG9ubHkgc3RyYXRlZ3lOYW1lOiBzdHJpbmcgPSBTdG9yYWdlU3RyYXRlZ2llcy5Jbk1lbW9yeTtcclxuXHRyZWFkb25seSBrZXlDaGFuZ2VzOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xyXG5cdGlzQXZhaWxhYmxlOiBib29sZWFuID0gdHJ1ZTtcclxuXHRyZWFkb25seSBuYW1lOiBzdHJpbmcgPSBJbk1lbW9yeVN0b3JhZ2VTdHJhdGVneS5zdHJhdGVneU5hbWU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKEBJbmplY3QoU3RyYXRlZ3lDYWNoZVNlcnZpY2UpIHByb3RlY3RlZCBjYWNoZTogU3RyYXRlZ3lDYWNoZVNlcnZpY2UpIHt9XHJcblxyXG5cdGdldChrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcblx0XHRyZXR1cm4gb2YodGhpcy5jYWNoZS5nZXQodGhpcy5uYW1lLCBrZXkpKTtcclxuXHR9XHJcblxyXG5cdHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcblx0XHR0aGlzLmNhY2hlLnNldCh0aGlzLm5hbWUsIGtleSwgdmFsdWUpO1xyXG5cdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQoa2V5KTtcclxuXHRcdHJldHVybiBvZih2YWx1ZSk7XHJcblx0fVxyXG5cclxuXHRkZWwoa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY2FjaGUuZGVsKHRoaXMubmFtZSwga2V5KTtcclxuXHRcdHRoaXMua2V5Q2hhbmdlcy5uZXh0KGtleSk7XHJcblx0XHRyZXR1cm4gb2YobnVsbCk7XHJcblx0fVxyXG5cclxuXHRjbGVhcigpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY2FjaGUuY2xlYXIodGhpcy5uYW1lKTtcclxuXHRcdHRoaXMua2V5Q2hhbmdlcy5uZXh0KG51bGwpO1xyXG5cdFx0cmV0dXJuIG9mKG51bGwpO1xyXG5cdH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1N0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi4vY29yZS9pbnRlcmZhY2VzL3N0b3JhZ2VTdHJhdGVneSc7XHJcbmltcG9ydCB7TG9jYWxTdG9yYWdlU3RyYXRlZ3l9IGZyb20gJy4vbG9jYWxTdG9yYWdlJztcclxuaW1wb3J0IHtTZXNzaW9uU3RvcmFnZVN0cmF0ZWd5fSBmcm9tICcuL3Nlc3Npb25TdG9yYWdlJztcclxuaW1wb3J0IHtJbk1lbW9yeVN0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi9pbk1lbW9yeSc7XHJcblxyXG5leHBvcnQgY29uc3QgU1RPUkFHRV9TVFJBVEVHSUVTOiBJbmplY3Rpb25Ub2tlbjxTdG9yYWdlU3RyYXRlZ3k8YW55Pj4gPSBuZXcgSW5qZWN0aW9uVG9rZW48U3RvcmFnZVN0cmF0ZWd5PGFueT4+KCdTVE9SQUdFX1NUUkFURUdJRVMnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBTdHJhdGVnaWVzOiBQcm92aWRlcltdID0gW1xyXG5cdHtwcm92aWRlOiBTVE9SQUdFX1NUUkFURUdJRVMsIHVzZUNsYXNzOiBJbk1lbW9yeVN0b3JhZ2VTdHJhdGVneSwgbXVsdGk6IHRydWV9LFxyXG5cdHtwcm92aWRlOiBTVE9SQUdFX1NUUkFURUdJRVMsIHVzZUNsYXNzOiBMb2NhbFN0b3JhZ2VTdHJhdGVneSwgbXVsdGk6IHRydWV9LFxyXG5cdHtwcm92aWRlOiBTVE9SQUdFX1NUUkFURUdJRVMsIHVzZUNsYXNzOiBTZXNzaW9uU3RvcmFnZVN0cmF0ZWd5LCBtdWx0aTogdHJ1ZX0sXHJcbl07XHJcbiIsImltcG9ydCB7T2JzZXJ2YWJsZSwgb2YsIFN1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge1N0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi4vbGliL2NvcmUvaW50ZXJmYWNlcy9zdG9yYWdlU3RyYXRlZ3knO1xyXG5pbXBvcnQge09wdGlvbmFsfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmV4cG9ydCBjb25zdCBTdG9yYWdlU3RyYXRlZ3lTdHViTmFtZTogc3RyaW5nID0gJ3N0dWJfc3RyYXRlZ3knO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VTdHJhdGVneVN0dWIgaW1wbGVtZW50cyBTdG9yYWdlU3RyYXRlZ3k8YW55PiB7XHJcblxyXG5cdHJlYWRvbmx5IGtleUNoYW5nZXM6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0KCk7XHJcblx0cHVibGljIHN0b3JlOiBhbnkgPSB7fTtcclxuXHRwdWJsaWMgX2F2YWlsYWJsZTogYm9vbGVhbiA9IHRydWU7XHJcblx0cmVhZG9ubHkgbmFtZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBuYW1lPzogc3RyaW5nKSB7XHJcblx0XHR0aGlzLm5hbWUgPSBuYW1lIHx8IFN0b3JhZ2VTdHJhdGVneVN0dWJOYW1lO1xyXG5cdH1cclxuXHJcblx0Z2V0IGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2F2YWlsYWJsZTtcclxuXHR9XHJcblxyXG5cdGdldChrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XHJcblx0XHRyZXR1cm4gb2YodGhpcy5zdG9yZVtrZXldKTtcclxuXHR9XHJcblxyXG5cdHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XHJcblx0XHR0aGlzLnN0b3JlW2tleV0gPSB2YWx1ZTtcclxuXHRcdHRoaXMua2V5Q2hhbmdlcy5uZXh0KGtleSk7XHJcblx0XHRyZXR1cm4gb2YodmFsdWUpO1xyXG5cdH1cclxuXHJcblx0ZGVsKGtleTogc3RyaW5nKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcblx0XHRkZWxldGUgdGhpcy5zdG9yZVtrZXldO1xyXG5cdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQoa2V5KTtcclxuXHRcdHJldHVybiBvZihudWxsKTtcclxuXHR9XHJcblxyXG5cdGNsZWFyKCk6IE9ic2VydmFibGU8dm9pZD4ge1xyXG5cdFx0dGhpcy5zdG9yZSA9IHt9O1xyXG5cdFx0dGhpcy5rZXlDaGFuZ2VzLm5leHQobnVsbCk7XHJcblx0XHRyZXR1cm4gb2YobnVsbCk7XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQge1dlYlN0b3JhZ2V9IGZyb20gJy4uL2xpYi9jb3JlL2ludGVyZmFjZXMvd2ViU3RvcmFnZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZVN0dWIgaW1wbGVtZW50cyBXZWJTdG9yYWdlIHtcclxuXHRbbmFtZTogc3RyaW5nXTogYW55O1xyXG5cclxuXHRwdWJsaWMgc3RvcmU6IHsgW3Byb3A6IHN0cmluZ106IGFueSB9ID0ge307XHJcblxyXG5cdGdldCBsZW5ndGgoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0b3JlKS5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuc3RvcmUgPSB7fTtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRcdHJldHVybiB0aGlzLnN0b3JlW2tleV0gfHwgbnVsbDtcclxuXHR9XHJcblxyXG5cdGtleShpbmRleDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5zdG9yZSlbaW5kZXhdO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0ZGVsZXRlIHRoaXMuc3RvcmVba2V5XTtcclxuXHR9XHJcblxyXG5cdHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMuc3RvcmVba2V5XSA9IHZhbHVlO1xyXG5cdH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ3l9IGZyb20gJy4uL2NvcmUvaW50ZXJmYWNlcy9zdG9yYWdlU3RyYXRlZ3knO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge0luamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWx9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1NUT1JBR0VfU1RSQVRFR0lFU30gZnJvbSAnLi4vc3RyYXRlZ2llcyc7XHJcbmltcG9ydCB7U3RvcmFnZVN0cmF0ZWdpZXN9IGZyb20gJy4uL2NvbnN0YW50cy9zdHJhdGVneSc7XHJcblxyXG5leHBvcnQgY29uc3QgSW52YWxpZFN0cmF0ZWd5RXJyb3IgPSAnaW52YWxpZF9zdHJhdGVneSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7cHJvdmlkZWRJbjogJ3Jvb3QnfSlcclxuZXhwb3J0IGNsYXNzIFN0cmF0ZWd5SW5kZXgge1xyXG5cclxuXHRzdGF0aWMgaW5kZXg6IHsgW25hbWU6IHN0cmluZ106IFN0b3JhZ2VTdHJhdGVneTxhbnk+IH0gPSB7fTtcclxuXHRyZWFkb25seSByZWdpc3RyYXRpb24kOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBASW5qZWN0KFNUT1JBR0VfU1RSQVRFR0lFUykgcHJvdGVjdGVkIHN0cmF0ZWdpZXM6IFN0b3JhZ2VTdHJhdGVneTxhbnk+W10pIHtcclxuXHRcdGlmICghc3RyYXRlZ2llcykgc3RyYXRlZ2llcyA9IFtdO1xyXG5cdFx0dGhpcy5zdHJhdGVnaWVzID0gc3RyYXRlZ2llcy5yZXZlcnNlKClcclxuXHRcdFx0Lm1hcCgoc3RyYXRlZ3k6IFN0b3JhZ2VTdHJhdGVneTxhbnk+LCBpbmRleCwgYXJyKSA9PiBzdHJhdGVneS5uYW1lKVxyXG5cdFx0XHQubWFwKChuYW1lOiBzdHJpbmcsIGluZGV4LCBhcnIpID0+IGFyci5pbmRleE9mKG5hbWUpID09PSBpbmRleCA/IGluZGV4IDogbnVsbClcclxuXHRcdFx0LmZpbHRlcigoaW5kZXg6IG51bWJlcikgPT4gaW5kZXggIT09IG51bGwpXHJcblx0XHRcdC5tYXAoKGluZGV4OiBudW1iZXIpID0+IHN0cmF0ZWdpZXNbaW5kZXhdKTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBnZXQobmFtZTogc3RyaW5nKTogU3RvcmFnZVN0cmF0ZWd5PGFueT4ge1xyXG5cdFx0aWYgKCF0aGlzLmlzU3RyYXRlZ3lSZWdpc3RlcmVkKG5hbWUpKSB0aHJvdyBFcnJvcihJbnZhbGlkU3RyYXRlZ3lFcnJvcik7XHJcblx0XHRsZXQgc3RyYXRlZ3k6IFN0b3JhZ2VTdHJhdGVneTxhbnk+ID0gU3RyYXRlZ3lJbmRleC5pbmRleFtuYW1lXTtcclxuXHRcdGlmICghc3RyYXRlZ3kuaXNBdmFpbGFibGUpIHtcclxuXHRcdFx0c3RyYXRlZ3kgPSBTdHJhdGVneUluZGV4LmluZGV4W1N0b3JhZ2VTdHJhdGVnaWVzLkluTWVtb3J5XTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBzdHJhdGVneTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBzZXQobmFtZTogc3RyaW5nLCBzdHJhdGVneSk6IHZvaWQge1xyXG5cdFx0U3RyYXRlZ3lJbmRleC5pbmRleFtuYW1lXSA9IHN0cmF0ZWd5O1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGNsZWFyKG5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmIChuYW1lICE9PSB1bmRlZmluZWQpIGRlbGV0ZSBTdHJhdGVneUluZGV4LmluZGV4W25hbWVdO1xyXG5cdFx0ZWxzZSBTdHJhdGVneUluZGV4LmluZGV4ID0ge307XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgaXNTdHJhdGVneVJlZ2lzdGVyZWQobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gbmFtZSBpbiBTdHJhdGVneUluZGV4LmluZGV4O1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGhhc1JlZ2lzdHJlZFN0cmF0ZWdpZXMoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gT2JqZWN0LmtleXMoU3RyYXRlZ3lJbmRleC5pbmRleCkubGVuZ3RoID4gMDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRTdHJhdGVneShuYW1lOiBzdHJpbmcpOiBTdG9yYWdlU3RyYXRlZ3k8YW55PiB7XHJcblx0XHRyZXR1cm4gU3RyYXRlZ3lJbmRleC5nZXQobmFtZSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgaW5kZXhTdHJhdGVnaWVzKCkge1xyXG5cdFx0dGhpcy5zdHJhdGVnaWVzLmZvckVhY2goKHN0cmF0ZWd5OiBTdG9yYWdlU3RyYXRlZ3k8YW55PikgPT4gdGhpcy5yZWdpc3RlcihzdHJhdGVneS5uYW1lLCBzdHJhdGVneSkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGluZGV4U3RyYXRlZ3kobmFtZTogc3RyaW5nLCBvdmVycmlkZUlmRXhpc3RzOiBib29sZWFuID0gZmFsc2UpOiBTdG9yYWdlU3RyYXRlZ3k8YW55PiB7XHJcblx0XHRpZiAoU3RyYXRlZ3lJbmRleC5pc1N0cmF0ZWd5UmVnaXN0ZXJlZChuYW1lKSAmJiAhb3ZlcnJpZGVJZkV4aXN0cykgcmV0dXJuIFN0cmF0ZWd5SW5kZXguZ2V0KG5hbWUpO1xyXG5cdFx0Y29uc3Qgc3RyYXRlZ3k6IFN0b3JhZ2VTdHJhdGVneTxhbnk+ID0gdGhpcy5zdHJhdGVnaWVzLmZpbmQoKHN0cmF0ZWd5OiBTdG9yYWdlU3RyYXRlZ3k8YW55PikgPT4gc3RyYXRlZ3kubmFtZSA9PT0gbmFtZSk7XHJcblx0XHRpZiAoIXN0cmF0ZWd5KSB0aHJvdyBuZXcgRXJyb3IoSW52YWxpZFN0cmF0ZWd5RXJyb3IpO1xyXG5cdFx0dGhpcy5yZWdpc3RlcihuYW1lLCBzdHJhdGVneSwgb3ZlcnJpZGVJZkV4aXN0cyk7XHJcblx0XHRyZXR1cm4gc3RyYXRlZ3k7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgcmVnaXN0ZXIobmFtZTogc3RyaW5nLCBzdHJhdGVneTogU3RvcmFnZVN0cmF0ZWd5PGFueT4sIG92ZXJyaWRlSWZFeGlzdHM6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG5cdFx0aWYgKCFTdHJhdGVneUluZGV4LmlzU3RyYXRlZ3lSZWdpc3RlcmVkKG5hbWUpIHx8IG92ZXJyaWRlSWZFeGlzdHMpIHtcclxuXHRcdFx0U3RyYXRlZ3lJbmRleC5zZXQobmFtZSwgc3RyYXRlZ3kpO1xyXG5cdFx0XHR0aGlzLnJlZ2lzdHJhdGlvbiQubmV4dChuYW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQge0ZhY3RvcnlQcm92aWRlcn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7U3luY1N0b3JhZ2V9IGZyb20gJy4uL2NvcmUvdGVtcGxhdGVzL3N5bmNTdG9yYWdlJztcclxuaW1wb3J0IHtTdHJhdGVneUluZGV4fSBmcm9tICcuL3N0cmF0ZWd5SW5kZXgnO1xyXG5pbXBvcnQge1N0b3JhZ2VTdHJhdGVneX0gZnJvbSAnLi4vY29yZS9pbnRlcmZhY2VzL3N0b3JhZ2VTdHJhdGVneSc7XHJcbmltcG9ydCB7U3RvcmFnZVN0cmF0ZWdpZXN9IGZyb20gJy4uL2NvbnN0YW50cy9zdHJhdGVneSc7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlU2VydmljZSBleHRlbmRzIFN5bmNTdG9yYWdlIHt9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRTZXJ2aWNlKGluZGV4OiBTdHJhdGVneUluZGV4KSB7XHJcblx0Y29uc3Qgc3RyYXRlZ3k6IFN0b3JhZ2VTdHJhdGVneTxhbnk+ID0gaW5kZXguaW5kZXhTdHJhdGVneShTdG9yYWdlU3RyYXRlZ2llcy5Mb2NhbCk7XHJcblx0cmV0dXJuIG5ldyBTeW5jU3RvcmFnZShzdHJhdGVneSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMb2NhbFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXI6IEZhY3RvcnlQcm92aWRlciA9IHtcclxuXHRwcm92aWRlOiBMb2NhbFN0b3JhZ2VTZXJ2aWNlLFxyXG5cdHVzZUZhY3Rvcnk6IGJ1aWxkU2VydmljZSxcclxuXHRkZXBzOiBbU3RyYXRlZ3lJbmRleF1cclxufTtcclxuIiwiaW1wb3J0IHtGYWN0b3J5UHJvdmlkZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1N5bmNTdG9yYWdlfSBmcm9tICcuLi9jb3JlL3RlbXBsYXRlcy9zeW5jU3RvcmFnZSc7XHJcbmltcG9ydCB7U3RyYXRlZ3lJbmRleH0gZnJvbSAnLi9zdHJhdGVneUluZGV4JztcclxuaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ3l9IGZyb20gJy4uL2NvcmUvaW50ZXJmYWNlcy9zdG9yYWdlU3RyYXRlZ3knO1xyXG5pbXBvcnQge1N0b3JhZ2VTdHJhdGVnaWVzfSBmcm9tICcuLi9jb25zdGFudHMvc3RyYXRlZ3knO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlc3Npb25TdG9yYWdlU2VydmljZSBleHRlbmRzIFN5bmNTdG9yYWdlIHt9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRTZXJ2aWNlKGluZGV4OiBTdHJhdGVneUluZGV4KSB7XHJcblx0Y29uc3Qgc3RyYXRlZ3k6IFN0b3JhZ2VTdHJhdGVneTxhbnk+ID0gaW5kZXguaW5kZXhTdHJhdGVneShTdG9yYWdlU3RyYXRlZ2llcy5TZXNzaW9uKTtcclxuXHRyZXR1cm4gbmV3IFN5bmNTdG9yYWdlKHN0cmF0ZWd5KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFNlc3Npb25TdG9yYWdlU2VydmljZVByb3ZpZGVyOiBGYWN0b3J5UHJvdmlkZXIgPSB7XHJcblx0cHJvdmlkZTogU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLFxyXG5cdHVzZUZhY3Rvcnk6IGJ1aWxkU2VydmljZSxcclxuXHRkZXBzOiBbU3RyYXRlZ3lJbmRleF1cclxufTtcclxuIiwiaW1wb3J0IHtTdHJhdGVneUluZGV4fSBmcm9tICcuLi9zZXJ2aWNlcy9zdHJhdGVneUluZGV4JztcclxuaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ2llc30gZnJvbSAnLi4vY29uc3RhbnRzL3N0cmF0ZWd5JztcclxuaW1wb3J0IHtTdG9yYWdlS2V5TWFuYWdlcn0gZnJvbSAnLi9zdG9yYWdlS2V5TWFuYWdlcic7XHJcbmltcG9ydCB7bm9vcH0gZnJvbSAnLi9ub29wJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWNvcmF0b3JCdWlsZGVyIHtcclxuXHRcclxuXHRzdGF0aWMgYnVpbGRTeW5jU3RyYXRlZ3lEZWNvcmF0b3Ioc3RyYXRlZ3lOYW1lOiBzdHJpbmcgfCBTdG9yYWdlU3RyYXRlZ2llcywgcHJvdG90eXBlLCBwcm9wTmFtZTogc3RyaW5nLCBrZXk/OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogYW55ID0gbnVsbCkge1xyXG5cdFx0Y29uc3QgcmF3S2V5OiBzdHJpbmcgPSBrZXkgfHwgcHJvcE5hbWU7XHJcblx0XHRsZXQgc3RvcmFnZUtleTogc3RyaW5nO1xyXG5cdFx0XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBwcm9wTmFtZSwge1xyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGxldCB2YWx1ZTogYW55O1xyXG5cdFx0XHRcdFN0cmF0ZWd5SW5kZXguZ2V0KHN0cmF0ZWd5TmFtZSkuZ2V0KGdldEtleSgpKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4gdmFsdWUgPSByZXN1bHQpO1xyXG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogdmFsdWU7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcclxuXHRcdFx0XHRTdHJhdGVneUluZGV4LmdldChzdHJhdGVneU5hbWUpLnNldChnZXRLZXkoKSwgdmFsdWUpLnN1YnNjcmliZShub29wKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldEtleSgpIHtcclxuXHRcdFx0aWYgKHN0b3JhZ2VLZXkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHN0b3JhZ2VLZXk7XHJcblx0XHRcdHJldHVybiBzdG9yYWdlS2V5ID0gU3RvcmFnZUtleU1hbmFnZXIubm9ybWFsaXplKHJhd0tleSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG4iLCJpbXBvcnQge1N0b3JhZ2VTdHJhdGVnaWVzfSBmcm9tICcuL2NvbnN0YW50cy9zdHJhdGVneSc7XHJcbmltcG9ydCB7RGVjb3JhdG9yQnVpbGRlcn0gZnJvbSAnLi9oZWxwZXJzL2RlY29yYXRvckJ1aWxkZXInO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIExvY2FsU3RvcmFnZShrZXk/OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IGFueSkge1xyXG5cdHJldHVybiBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BOYW1lKSB7XHJcblx0XHREZWNvcmF0b3JCdWlsZGVyLmJ1aWxkU3luY1N0cmF0ZWd5RGVjb3JhdG9yKFN0b3JhZ2VTdHJhdGVnaWVzLkxvY2FsLCBwcm90b3R5cGUsIHByb3BOYW1lLCBrZXksIGRlZmF1bHRWYWx1ZSk7XHJcblx0fTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNlc3Npb25TdG9yYWdlKGtleT86IHN0cmluZywgZGVmYXVsdFZhbHVlPzogYW55KSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcE5hbWUpIHtcclxuXHRcdERlY29yYXRvckJ1aWxkZXIuYnVpbGRTeW5jU3RyYXRlZ3lEZWNvcmF0b3IoU3RvcmFnZVN0cmF0ZWdpZXMuU2Vzc2lvbiwgcHJvdG90eXBlLCBwcm9wTmFtZSwga2V5LCBkZWZhdWx0VmFsdWUpO1xyXG5cdH07XHJcbn1cclxuIiwiaW1wb3J0IHtMb2NhbFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJ9IGZyb20gJy4vbG9jYWxTdG9yYWdlJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtTZXNzaW9uU3RvcmFnZVNlcnZpY2VQcm92aWRlcn0gZnJvbSAnLi9zZXNzaW9uU3RvcmFnZSc7XG5cbmV4cG9ydCBjb25zdCBTZXJ2aWNlczogUHJvdmlkZXJbXSA9IFtcblx0TG9jYWxTdG9yYWdlU2VydmljZVByb3ZpZGVyLFxuXHRTZXNzaW9uU3RvcmFnZVNlcnZpY2VQcm92aWRlclxuXTtcbiIsImltcG9ydCB7QVBQX0lOSVRJQUxJWkVSLCBJbmplY3QsIEluamVjdGlvblRva2VuLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSwgT3B0aW9uYWx9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtMb2NhbFN0b3JhZ2VQcm92aWRlciwgU2Vzc2lvblN0b3JhZ2VQcm92aWRlcn0gZnJvbSAnLi9jb3JlL25hdGl2ZVN0b3JhZ2UnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi9zZXJ2aWNlcy9pbmRleCc7XG5pbXBvcnQge1N0cmF0ZWdpZXN9IGZyb20gJy4vc3RyYXRlZ2llcy9pbmRleCc7XG5pbXBvcnQge1N0cmF0ZWd5SW5kZXh9IGZyb20gJy4vc2VydmljZXMvc3RyYXRlZ3lJbmRleCc7XG5pbXBvcnQge05neFdlYnN0b3JhZ2VDb25maWd1cmF0aW9ufSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge1N0b3JhZ2VLZXlNYW5hZ2VyfSBmcm9tICcuL2hlbHBlcnMvc3RvcmFnZUtleU1hbmFnZXInO1xuXG5leHBvcnQgY29uc3QgTElCX0NPTkZJRzogSW5qZWN0aW9uVG9rZW48Tmd4V2Vic3RvcmFnZUNvbmZpZ3VyYXRpb24+ID0gbmV3IEluamVjdGlvblRva2VuPE5neFdlYnN0b3JhZ2VDb25maWd1cmF0aW9uPignbmd4X3dlYnN0b3JhZ2VfY29uZmlnJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBJbml0KGluZGV4OiBTdHJhdGVneUluZGV4KSB7XG5cdGluZGV4LmluZGV4U3RyYXRlZ2llcygpO1xuXHRyZXR1cm4gKCkgPT4gU3RyYXRlZ3lJbmRleC5pbmRleDtcbn1cblxuQE5nTW9kdWxlKHt9KVxuZXhwb3J0IGNsYXNzIE5neFdlYnN0b3JhZ2VNb2R1bGUge1xuXG5cdGNvbnN0cnVjdG9yKGluZGV4OiBTdHJhdGVneUluZGV4LCBAT3B0aW9uYWwoKSBASW5qZWN0KExJQl9DT05GSUcpIGNvbmZpZzogTmd4V2Vic3RvcmFnZUNvbmZpZ3VyYXRpb24pIHtcblx0XHRpZiAoY29uZmlnKSBTdG9yYWdlS2V5TWFuYWdlci5jb25zdW1lQ29uZmlndXJhdGlvbihjb25maWcpO1xuXHRcdGVsc2UgY29uc29sZS5lcnJvcignTmd4V2Vic3RvcmFnZSA6IFBvc3NpYmxlIG1pc2NvbmZpZ3VyYXRpb24gKFRoZSBmb3JSb290IG1ldGhvZCB1c2FnZSBpcyBtYW5kYXRvcnkgc2luY2UgdGhlIDMuMC4wKScpO1xuXHR9XG5cblx0c3RhdGljIGZvclJvb3QoY29uZmlnOiBOZ3hXZWJzdG9yYWdlQ29uZmlndXJhdGlvbiA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5nTW9kdWxlOiBOZ3hXZWJzdG9yYWdlTW9kdWxlLFxuXHRcdFx0cHJvdmlkZXJzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRwcm92aWRlOiBMSUJfQ09ORklHLFxuXHRcdFx0XHRcdHVzZVZhbHVlOiBjb25maWcsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdExvY2FsU3RvcmFnZVByb3ZpZGVyLFxuXHRcdFx0XHRTZXNzaW9uU3RvcmFnZVByb3ZpZGVyLFxuXHRcdFx0XHQuLi5TZXJ2aWNlcyxcblx0XHRcdFx0Li4uU3RyYXRlZ2llcyxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcblx0XHRcdFx0XHR1c2VGYWN0b3J5OiBhcHBJbml0LFxuXHRcdFx0XHRcdGRlcHM6IFtTdHJhdGVneUluZGV4XSxcblx0XHRcdFx0XHRtdWx0aTogdHJ1ZVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fTtcblx0fVxuXG59XG4iXSwibmFtZXMiOlsiZmlsdGVyIiwic3dpdGNoTWFwIiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJzaGFyZVJlcGxheSIsIm1hcCIsIkluamVjdGFibGUiLCJJbmplY3Rpb25Ub2tlbiIsIlN1YmplY3QiLCJvZiIsInRzbGliXzEuX19leHRlbmRzIiwiaXNQbGF0Zm9ybUJyb3dzZXIiLCJJbmplY3QiLCJQTEFURk9STV9JRCIsIk5nWm9uZSIsIk9wdGlvbmFsIiwiYnVpbGRTZXJ2aWNlIiwiQVBQX0lOSVRJQUxJWkVSIiwiTmdNb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztRQUNDLE9BQVEsZ0JBQWdCO1FBQ3hCLFNBQVUsa0JBQWtCO1FBQzVCLFVBQVcsb0JBQW9COzs7Ozs7Ozs7O0FDSGhDLGFBQWdCLElBQUksTUFBSzs7Ozs7OztBQ0F6QixRQUFhLGFBQWEsR0FBRyxnQkFBZ0I7O0FBQzdDLFFBQWEsZ0JBQWdCLEdBQUcsR0FBRzs7QUFDbkMsUUFBYSxzQkFBc0IsR0FBRyxLQUFLOzs7Ozs7QUNGM0MsSUFHQTtRQUFBO1NBZ0NDOzs7OztRQTFCTywyQkFBUzs7OztZQUFoQixVQUFpQixHQUFXO2dCQUMzQixHQUFHLEdBQUcsaUJBQWlCLENBQUMsZUFBZSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ2xFLE9BQU8sS0FBRyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxHQUFHLEdBQUssQ0FBQzthQUN6RTs7Ozs7UUFFTSxpQ0FBZTs7OztZQUF0QixVQUF1QixHQUFXO2dCQUNqQyxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsTUFBTSxHQUFHLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNqRjs7Ozs7UUFFTSwyQkFBUzs7OztZQUFoQixVQUFpQixNQUFjO2dCQUM5QixpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO2FBQ2xDOzs7OztRQUVNLDhCQUFZOzs7O1lBQW5CLFVBQW9CLFNBQWlCO2dCQUNwQyxpQkFBaUIsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO2FBQ3hDOzs7OztRQUVNLGtDQUFnQjs7OztZQUF2QixVQUF3QixNQUFlO2dCQUN0QyxpQkFBaUIsQ0FBQyxlQUFlLEdB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